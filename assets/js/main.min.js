/*! 2015-03-10 */
function init(){var a="event";$("#swap").on("click",swapModes),$("#reset").on("click",resetPuzzle),($(window).width()<=360||$(window).height()<=360)&&($("html").addClass("mobile"),a=$(".puzzle-wrapper")),$(".puzzle-cell").not(".initial").each(function(){$(this).qtip({content:{text:$(".tip-wrapper").clone()},show:{event:"click"},hide:{delay:300,fixed:!0},position:{my:"center center",at:"center center",target:a},events:{render:function(a,b){var b=this.qtip("api");this.find(".tip-cell").on("click",function(){tipClicked(this,b)})}}})})}function swapModes(a){"numbers"==$(a.currentTarget).data("mode")?($(a.currentTarget).data("mode","colors").find(".swap-text").text("numbers"),$("html").removeClass("numbers").addClass("colors")):($(a.currentTarget).data("mode","numbers").find(".swap-text").text("colors"),$("html").removeClass("colors").addClass("numbers"))}function resetPuzzle(){$(".puzzle-cell").not(".initial").attr("data-val","0").data("val","0")}function tipClicked(a,b){b.target.attr("data-val",$(a).data("val")).data("val",$(a).data("val")),checkCompletion(),b.hide()}function checkCompletion(){$('.puzzle-cell[data-val="0"]').length||$("#solve").removeClass("disabled").on("click",validateSolution)}function validateSolution(){console.log("valid puzzle?");var a=!0;$(".puzzle-cell").each(function(){validateCell($(this))||(a=!1)}),alert(a?"You solved it!":"Sorry, not a winner. Please try again.")}function validateCell(a){var b=getMatrixVals(a),c=getRowVals(a),d=getColVals(a);return isUnique(b)&&isUnique(c)&&isUnique(d)}function getMatrixVals(a){var b=[];return a.siblings().andSelf().each(function(){b.push($(this).data("val"))}),b}function getRowVals(a){var b=[],c=$('.puzzle-cell[data-row="'+a.data("row")+'"');return c.each(function(){b.push($(this).data("val"))}),b}function getColVals(a){var b=[],c=$('.puzzle-cell[data-col="'+a.data("col")+'"');return c.each(function(){b.push($(this).data("val"))}),b}function isUnique(a){for(var b={},c=0;c<a.length;c++)b[a[c]]||(b[a[c]]=!0);return Object.keys(b).length===a.length}$(document).ready(init);